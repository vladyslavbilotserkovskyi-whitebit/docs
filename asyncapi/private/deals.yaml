asyncapi: 3.0.0
info:
  title: WhiteBit Deals
  version: 1.0.0
  description: Get and subscribe to deals/trades updates

servers:
  production:
    host: api.whitebit.com
    protocol: wss
    description: WhiteBIT Global Server
  eu:
    host: api.whitebit.eu
    protocol: wss
    description: WhiteBIT EU Server

channels:
  /ws:
    address: /ws
    description: Deals operations
    messages:
      dealsRequest:
        $ref: '#/components/messages/dealsRequest'
      dealsResponse:
        $ref: '#/components/messages/dealsResponse'
      dealsSubscribe:
        $ref: '#/components/messages/dealsSubscribe'
      dealsSubscribeResponse:
        $ref: '#/components/messages/dealsSubscribeResponse'
      dealsUpdate:
        $ref: '#/components/messages/dealsUpdate'
      dealsUnsubscribe:
        $ref: '#/components/messages/dealsUnsubscribe'

operations:
  sendDealsRequest:
    action: receive
    channel:
      $ref: '#/channels/~1ws'
    messages:
      - $ref: '#/channels/~1ws/messages/dealsRequest'

  receiveDealsResponse:
    action: send
    channel:
      $ref: '#/channels/~1ws'
    messages:
      - $ref: '#/channels/~1ws/messages/dealsResponse'

  sendDealsSubscribe:
    action: receive
    channel:
      $ref: '#/channels/~1ws'
    messages:
      - $ref: '#/channels/~1ws/messages/dealsSubscribe'

  receiveDealsSubscribeResponse:
    action: send
    channel:
      $ref: '#/channels/~1ws'
    messages:
      - $ref: '#/channels/~1ws/messages/dealsSubscribeResponse'

  receiveDealsUpdates:
    action: send
    description: Receive real-time deals updates
    channel:
      $ref: '#/channels/~1ws'
    messages:
      - $ref: '#/channels/~1ws/messages/dealsUpdate'

  sendDealsUnsubscribe:
    action: receive
    channel:
      $ref: '#/channels/~1ws'
    messages:
      - $ref: '#/channels/~1ws/messages/dealsUnsubscribe'

components:
  messages:
    dealsRequest:
      name: DealsRequest
      title: Deals Query
      summary: Get user deals/trades
      payload:
        type: object

    dealsResponse:
      name: DealsResponse
      title: Deals Response
      summary: List of user deals
      payload:
        type: object

    dealsSubscribe:
      name: DealsSubscribe
      title: Subscribe to Deals
      summary: Subscribe to deals updates
      payload:
        type: object

    dealsSubscribeResponse:
      name: DealsSubscribeResponse
      title: Subscribe Response
      summary: Subscription confirmation
      payload:
        type: object

    dealsUpdate:
      name: DealsUpdate
      title: Deals Update
      summary: Real-time deals update
      payload:
        type: object

    dealsUnsubscribe:
      name: DealsUnsubscribe
      title: Unsubscribe from Deals
      summary: Stop receiving deals updates
      payload:
        type: object
